# Banco de dados:

Crie o banco de dados oficial usando o comando: `CREATE DATABASE car_rental;`

Para criar o banco de dados dos testes unitários, use : `CREATE DATABASE test_car_rental;`

Após criar, conecte-se em cada banco e rode os seguintes os comandos DDL:

```
-- public.brand definition

-- Drop table

-- DROP TABLE public.brand;

CREATE TABLE public.brand (
	id int4 NOT NULL GENERATED ALWAYS AS IDENTITY,
	"name" varchar NOT NULL,
	created_at timestamptz NOT NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT brand_pk PRIMARY KEY (id),
	CONSTRAINT brand_un UNIQUE (name)
);


-- public.category definition

-- Drop table

-- DROP TABLE public.category;

CREATE TABLE public.category (
	id int4 NOT NULL GENERATED ALWAYS AS IDENTITY,
	"name" varchar NOT NULL,
	description varchar NOT NULL,
	created_at timestamptz NOT NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT categories_pk PRIMARY KEY (id),
	CONSTRAINT category_un UNIQUE (name)
);


-- public.customer definition

-- Drop table

-- DROP TABLE public.customer;

CREATE TABLE public.customer (
	id int4 NOT NULL GENERATED ALWAYS AS IDENTITY,
	"name" varchar NOT NULL,
	birth_date date NOT NULL,
	email varchar NOT NULL,
	driver_license varchar NOT NULL,
	address varchar NOT NULL,
	phone_number varchar NOT NULL,
	created_at timestamptz NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamptz NOT NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT customer_un UNIQUE (driver_license),
	CONSTRAINT customers_pk PRIMARY KEY (id)
);


-- public.specification definition

-- Drop table

-- DROP TABLE public.specification;

CREATE TABLE public.specification (
	id int4 NOT NULL GENERATED ALWAYS AS IDENTITY,
	"name" varchar NOT NULL,
	description varchar NOT NULL,
	created_at timestamptz NOT NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT specification_pk PRIMARY KEY (id),
	CONSTRAINT specification_un UNIQUE (name)
);


-- public.car definition

-- Drop table

-- DROP TABLE public.car;

CREATE TABLE public.car (
	id int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
	"name" varchar NOT NULL,
	description varchar NOT NULL,
	daily_rate int4 NOT NULL,
	available bool NOT NULL,
	license_plate varchar NOT NULL,
	brand_id int4 NOT NULL,
	category_id int4 NOT NULL,
	color varchar NOT NULL,
	created_at timestamptz NOT NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT car_un UNIQUE (license_plate),
	CONSTRAINT cars_pk PRIMARY KEY (id),
	CONSTRAINT cars_fk FOREIGN KEY (brand_id) REFERENCES public.brand(id),
	CONSTRAINT cars_fk_1 FOREIGN KEY (category_id) REFERENCES public.category(id)
);


-- public.car_image definition

-- Drop table

-- DROP TABLE public.car_image;

CREATE TABLE public.car_image (
	id int4 NOT NULL GENERATED ALWAYS AS IDENTITY,
	car_id int4 NOT NULL,
	image bytea NULL,
	created_at timestamptz NOT NULL DEFAULT CURRENT_TIMESTAMP,
	CONSTRAINT car_image_un UNIQUE (car_id),
	CONSTRAINT car_image_fk FOREIGN KEY (car_id) REFERENCES public.car(id)
);


-- public.car_specification definition

-- Drop table

-- DROP TABLE public.car_specification;

CREATE TABLE public.car_specification (
	id int4 NOT NULL GENERATED ALWAYS AS IDENTITY,
	car_id int4 NOT NULL,
	specification_id int4 NOT NULL,
	CONSTRAINT cars_specification_un UNIQUE (car_id, specification_id),
	CONSTRAINT cars_specifications_pk PRIMARY KEY (id),
	CONSTRAINT cars_specifications_fk FOREIGN KEY (car_id) REFERENCES public.car(id),
	CONSTRAINT cars_specifications_fk_1 FOREIGN KEY (specification_id) REFERENCES public.specification(id)
);


-- public.rental definition

-- Drop table

-- DROP TABLE public.rental;

CREATE TABLE public.rental (
	id int4 NOT NULL GENERATED ALWAYS AS IDENTITY,
	car_id int4 NOT NULL,
	customer_id int4 NOT NULL,
	start_date date NOT NULL,
	end_date date NOT NULL,
	created_at timestamptz NOT NULL DEFAULT CURRENT_TIMESTAMP,
	updated_at timestamptz NOT NULL DEFAULT CURRENT_TIMESTAMP,
	total int4 NOT NULL,
	CONSTRAINT rentals_pk PRIMARY KEY (id),
	CONSTRAINT rentals_fk FOREIGN KEY (car_id) REFERENCES public.car(id),
	CONSTRAINT rentals_fk_1 FOREIGN KEY (customer_id) REFERENCES public.customer(id)
);
```
